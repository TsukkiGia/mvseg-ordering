version: 1

# Run:
#   python -m experiments.tools.exp_yaml_launcher --config experiments/recipes/random/experiment_btcv.yaml --run

# Defaults applied to all experiments unless overridden per-entry.
defaults:
  prompt_config_path: experiments/prompt_generator_configs/click_prompt_generator.yml
  prompt_config_key: click_generator
  prompt_iterations: 20
  permutations: 100
  use_mega_dataset: true
  mega_dataset_name: BTCV
  mega_dataset_size: 100
  no_visualize: true
  device: cuda
  shards: 4
  experiment_seed: 23
  eval_fraction: 0.33
  eval_checkpoints: [1, 2, 4, 8, 10]
  plan_b_subset_size: 10
  plan_b_num_subsets: 10

experiments:
# exploration on 90, 95, 97 Dice to see effect on spread. Plan A
  - name: label_90
    dice_cutoff: 0.9
    commit_ground_truth: true
    script_dir: experiments/scripts/random/experiment_btcv/commit_label_90
    mega_dataset_size: 15
    plan: [A]

  - name: label_97
    dice_cutoff: 0.97
    commit_ground_truth: true
    script_dir: experiments/scripts/random/experiment_btcv/commit_label_97
    mega_dataset_size: 15
    plan: [A]

  - name: pred_90
    dice_cutoff: 0.9
    commit_ground_truth: false
    script_dir: experiments/scripts/random/experiment_btcv/commit_pred_90
    mega_dataset_size: 15
    plan: [A]

  - name: pred_97
    dice_cutoff: 0.97
    commit_ground_truth: false
    script_dir: experiments/scripts/random/experiment_btcv/commit_pred_97
    mega_dataset_size: 15
    plan: [A]

  - name: pred_95
    dice_cutoff: 0.95
    commit_ground_truth: false
    script_dir: experiments/scripts/random/experiment_btcv/commit_pred_95
    mega_dataset_size: 15
    plan: [A]

  - name: label_95
    dice_cutoff: 0.95
    commit_ground_truth: true
    script_dir: experiments/scripts/random/experiment_btcv/commit_label_95
    mega_dataset_size: 15
    plan: [A]

 # exploration on 50 iters to see effect on spread. Plan A
  - name: pred_97_iter50
    dice_cutoff: 0.97
    prompt_iterations: 50
    commit_ground_truth: false
    script_dir: experiments/scripts/random/experiment_btcv/commit_pred_97_iter50
    mega_dataset_size: 15
    plan: [A]

  # exploration on 90, 95, 97 Dice to see effect on spread. Plan B

  - name: label_90
    dice_cutoff: 0.9
    commit_ground_truth: true
    script_dir: experiments/scripts/random/experiment_btcv/commit_label_90
    plan: [B]

  - name: label_97
    dice_cutoff: 0.97
    commit_ground_truth: true
    script_dir: experiments/scripts/random/experiment_btcv/commit_label_97
    plan: [B]

  - name: pred_90
    dice_cutoff: 0.9
    commit_ground_truth: false
    script_dir: experiments/scripts/random/experiment_btcv/commit_pred_90
    plan: [B]

  - name: pred_97
    dice_cutoff: 0.97
    commit_ground_truth: false
    script_dir: experiments/scripts/random/experiment_btcv/commit_pred_97
    plan: [B]

  - name: pred_95
    dice_cutoff: 0.95
    commit_ground_truth: false
    script_dir: experiments/scripts/random/experiment_btcv/commit_pred_95
    plan: [B]

  - name: label_95
    dice_cutoff: 0.95
    commit_ground_truth: true
    script_dir: experiments/scripts/random/experiment_btcv/commit_label_95
    plan: [B]

# exploration on 50 iters to see effect on spread. Plan B
  - name: pred_97_iter50
    dice_cutoff: 0.97
    prompt_iterations: 50
    commit_ground_truth: false
    script_dir: experiments/scripts/random/experiment_btcv/commit_pred_97_iter50
    plan: [B]

# FINAL Results: 5, 20 prompt version with label and pred committing
  - name: pretrained_baseline_random_v2
    pretrained_model_score_goal: true
    commit_ground_truth: false
    script_dir: experiments/scripts/random_v2/experiment_btcv/pretrained_baseline
    plan_b_num_subsets: 10
    plan: [B]
  
  - name: pretrained_baseline_random_v2_5
    pretrained_model_score_goal: true
    commit_ground_truth: false
    prompt_iterations: 5
    script_dir: experiments/scripts/random_v2/experiment_btcv/pretrained_baseline5
    plan_b_num_subsets: 10
    plan: [B]

  - name: pretrained_baseline_random_v2
    pretrained_model_score_goal: true
    commit_ground_truth: true
    script_dir: experiments/scripts/random_v2/experiment_btcv/pretrained_baseline_gt
    plan_b_num_subsets: 10
    plan: [B]
  
  - name: pretrained_baseline_random_v2_5
    pretrained_model_score_goal: true
    commit_ground_truth: true
    prompt_iterations: 5
    script_dir: experiments/scripts/random_v2/experiment_btcv/pretrained_baseline5_gt
    plan_b_num_subsets: 10
    plan: [B]
